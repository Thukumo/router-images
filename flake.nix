{
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    openwrt-imagebuilder.url = "github:astro/nix-openwrt-imagebuilder";
  };
  outputs =
    {
      self,
      nixpkgs,
      openwrt-imagebuilder,
    }:
    let
      inherit (nixpkgs.lib) mapAttrs;

      pkgs = nixpkgs.legacyPackages.x86_64-linux;

      commonConfig = {
        inherit pkgs;
        target = "x86";
        variant = "64";
        profile = "generic";
        release = "24.10.5";
      };

      routerConfigs = {
        main-router = {
          packages = [
            "464xlat"
            "6in4"
            "6rd"
            "6to4"
            "arptables-legacy"
            "base-files"
            "bash"
            "bind-dig"
            "bind-libs"
            "block-mount"
            "blockd"
            "bnx2-firmware"
            "bpftool-full"
            "busybox"
            "ca-bundle"
            "ca-certificates"
            "cgi-io"
            "chat"
            "comgt"
            "comgt-ncm"
            "conntrack"
            "curl"
            "dbus"
            "ddns-scripts"
            "ddns-scripts-services"
            "dejavu-fonts-ttf-DejaVuSerif"
            "dejavu-fonts-ttf-DejaVuSerif-Bold"
            "dejavu-fonts-ttf-DejaVuSerif-BoldItalic"
            "dejavu-fonts-ttf-DejaVuSerif-Italic"
            "dmidecode"
            "dnsmasq-full"
            "dropbear"
            "dsvpn"
            "e100-firmware"
            "e2fsprogs"
            "etherwake"
            "ethtool"
            "external-protocol"
            "f2fs-tools"
            "f2fsck"
            "firewall4"
            "fstools"
            "fwtool"
            "getrandom"
            "glib2"
            "glorytun"
            "glorytun-udp"
            "gre"
            "grub2"
            "grub2-bios-setup"
            "grub2-efi"
            "hostapd-common"
            "htop"
            "httping"
            "hwinfo"
            "i915-firmware-dmc"
            "iftop"
            "igmpproxy"
            "ip-full"
            "ip6tables-mod-nat"
            "ip6tables-nft"
            "ipcalc"
            "iperf3-ssl"
            "iptables-mod-ipopt"
            "iptables-nft"
            "iptraf-ng"
            "iputils-ping"
            "iputils-tracepath"
            "iw"
            "iwinfo"
            "jansson4"
            "jq"
            "jshn"
            "jsonfilter"
            "kernel"
            "kmod-3c59x"
            "kmod-8139cp"
            "kmod-8139too"
            "kmod-acpi-video"
            "kmod-amazon-ena"
            "kmod-amd-xgbe"
            "kmod-arptables"
            "kmod-asn1-decoder"
            "kmod-ata-ahci"
            "kmod-ata-core"
            "kmod-atl1"
            "kmod-atl1c"
            "kmod-atl1e"
            "kmod-atl2"
            "kmod-atlantic"
            "kmod-atm"
            "kmod-b44"
            "kmod-backlight"
            "kmod-block2mtd"
            "kmod-bnx2"
            "kmod-bonding"
            "kmod-button-hotplug"
            "kmod-cfg80211"
            "kmod-crypto-acompress"
            "kmod-crypto-aead"
            "kmod-crypto-authenc"
            "kmod-crypto-cbc"
            "kmod-crypto-ccm"
            "kmod-crypto-cmac"
            "kmod-crypto-crc32c"
            "kmod-crypto-ctr"
            "kmod-crypto-deflate"
            "kmod-crypto-des"
            "kmod-crypto-echainiv"
            "kmod-crypto-gcm"
            "kmod-crypto-geniv"
            "kmod-crypto-gf128"
            "kmod-crypto-ghash"
            "kmod-crypto-hash"
            "kmod-crypto-hmac"
            "kmod-crypto-kpp"
            "kmod-crypto-lib-chacha20"
            "kmod-crypto-lib-chacha20poly1305"
            "kmod-crypto-lib-curve25519"
            "kmod-crypto-lib-poly1305"
            "kmod-crypto-manager"
            "kmod-crypto-md5"
            "kmod-crypto-null"
            "kmod-crypto-rng"
            "kmod-crypto-seqiv"
            "kmod-crypto-sha1"
            "kmod-crypto-sha256"
            "kmod-crypto-sha3"
            "kmod-crypto-sha512"
            "kmod-cryptodev"
            "kmod-dm9000"
            "kmod-dma-buf"
            "kmod-drm"
            "kmod-drm-buddy"
            "kmod-drm-display-helper"
            "kmod-drm-exec"
            "kmod-drm-i915"
            "kmod-drm-kms-helper"
            "kmod-drm-suballoc-helper"
            "kmod-drm-ttm"
            "kmod-drm-ttm-helper"
            "kmod-dwmac-intel"
            "kmod-e100"
            "kmod-e1000"
            "kmod-e1000e"
            "kmod-et131x"
            "kmod-ethoc"
            "kmod-fb"
            "kmod-fb-cfb-copyarea"
            "kmod-fb-cfb-fillrect"
            "kmod-fb-cfb-imgblt"
            "kmod-fb-sys-fops"
            "kmod-fb-sys-ram"
            "kmod-forcedeth"
            "kmod-fs-autofs4"
            "kmod-fs-vfat"
            "kmod-gpio-button-hotplug"
            "kmod-gre"
            "kmod-gre6"
            "kmod-hfcmulti"
            "kmod-hfcpci"
            "kmod-hid"
            "kmod-hid-generic"
            "kmod-hwmon-core"
            "kmod-i2c-algo-bit"
            "kmod-i2c-core"
            "kmod-i2c-gpio"
            "kmod-ifb"
            "kmod-igb"
            "kmod-igbvf"
            "kmod-igc"
            "kmod-ikconfig"
            "kmod-input-core"
            "kmod-input-evdev"
            "kmod-ip6-tunnel"
            "kmod-ip6tables"
            "kmod-ipsec"
            "kmod-ipsec4"
            "kmod-ipsec6"
            "kmod-ipt-conntrack"
            "kmod-ipt-core"
            "kmod-ipt-ipopt"
            "kmod-ipt-nat"
            "kmod-ipt-nat6"
            "kmod-iptunnel"
            "kmod-iptunnel4"
            "kmod-iptunnel6"
            "kmod-ixgbe"
            "kmod-ixgbevf"
            "kmod-lib-crc-ccitt"
            "kmod-lib-crc-itu-t"
            "kmod-lib-crc16"
            "kmod-lib-crc32c"
            "kmod-lib-crc7"
            "kmod-lib-lzo"
            "kmod-lib-textsearch"
            "kmod-lib-zlib-deflate"
            "kmod-lib-zlib-inflate"
            "kmod-libphy"
            "kmod-loop"
            "kmod-mac80211"
            "kmod-macsec"
            "kmod-macvlan"
            "kmod-mdio"
            "kmod-mdio-devres"
            "kmod-mii"
            "kmod-misdn"
            "kmod-mlx4-core"
            "kmod-mmc"
            "kmod-mmc-spi"
            "kmod-nat46"
            "kmod-natsemi"
            "kmod-ne2k-pci"
            "kmod-net-selftests"
            "kmod-netem"
            "kmod-netlink-diag"
            "kmod-nf-conncount"
            "kmod-nf-conntrack"
            "kmod-nf-conntrack-netlink"
            "kmod-nf-conntrack6"
            "kmod-nf-flow"
            "kmod-nf-ipt"
            "kmod-nf-ipt6"
            "kmod-nf-log"
            "kmod-nf-log6"
            "kmod-nf-nat"
            "kmod-nf-nat6"
            "kmod-nf-nathelper"
            "kmod-nf-nathelper-extra"
            "kmod-nf-reject"
            "kmod-nf-reject6"
            "kmod-nf-tproxy"
            "kmod-nfnetlink"
            "kmod-nft-compat"
            "kmod-nft-connlimit"
            "kmod-nft-core"
            "kmod-nft-fib"
            "kmod-nft-nat"
            "kmod-nft-offload"
            "kmod-nft-tproxy"
            "kmod-nls-base"
            "kmod-nls-cp437"
            "kmod-nls-iso8859-1"
            "kmod-nls-utf8"
            "kmod-ovpn-dco-v2"
            "kmod-pcnet32"
            "kmod-pcs-xpcs"
            "kmod-phy-ax88796b"
            "kmod-phy-broadcom"
            "kmod-phy-realtek"
            "kmod-phy-smsc"
            "kmod-phylib-broadcom"
            "kmod-phylink"
            "kmod-ppdev"
            "kmod-ppp"
            "kmod-pppoe"
            "kmod-pppox"
            "kmod-pps"
            "kmod-ptp"
            "kmod-r8125"
            "kmod-r8168"
            "kmod-r8169"
            "kmod-random-core"
            "kmod-rt2800-lib"
            "kmod-rt2800-usb"
            "kmod-rt2x00-lib"
            "kmod-rt2x00-usb"
            "kmod-rtl8192c-common"
            "kmod-rtl8192cu"
            "kmod-rtl8xxxu"
            "kmod-rtlwifi"
            "kmod-rtlwifi-usb"
            "kmod-sched"
            "kmod-sched-bpf"
            "kmod-sched-cake"
            "kmod-sched-core"
            "kmod-sched-flower"
            "kmod-scsi-core"
            "kmod-sctp"
            "kmod-sdhci"
            "kmod-serial-8250"
            "kmod-sis190"
            "kmod-sis900"
            "kmod-sit"
            "kmod-skge"
            "kmod-sky2"
            "kmod-slhc"
            "kmod-solos-pci"
            "kmod-spi-ks8995"
            "kmod-ssb"
            "kmod-stmmac-core"
            "kmod-swconfig"
            "kmod-tcp-nanqinlang"
            "kmod-tg3"
            "kmod-tls"
            "kmod-tulip"
            "kmod-tun"
            "kmod-udptunnel4"
            "kmod-udptunnel6"
            "kmod-usb-acm"
            "kmod-usb-core"
            "kmod-usb-ehci"
            "kmod-usb-hid"
            "kmod-usb-net"
            "kmod-usb-net-asix"
            "kmod-usb-net-asix-ax88179"
            "kmod-usb-net-cdc-eem"
            "kmod-usb-net-cdc-ether"
            "kmod-usb-net-cdc-mbim"
            "kmod-usb-net-cdc-ncm"
            "kmod-usb-net-cdc-subset"
            "kmod-usb-net-dm9601-ether"
            "kmod-usb-net-hso"
            "kmod-usb-net-huawei-cdc-ncm"
            "kmod-usb-net-ipheth"
            "kmod-usb-net-kalmia"
            "kmod-usb-net-kaweth"
            "kmod-usb-net-mcs7830"
            "kmod-usb-net-pegasus"
            "kmod-usb-net-qmi-wwan"
            "kmod-usb-net-rndis"
            "kmod-usb-net-rtl8152"
            "kmod-usb-net-sierrawireless"
            "kmod-usb-net-smsc95xx"
            "kmod-usb-net-sr9700"
            "kmod-usb-serial"
            "kmod-usb-serial-ark3116"
            "kmod-usb-serial-belkin"
            "kmod-usb-serial-ch341"
            "kmod-usb-serial-cp210x"
            "kmod-usb-serial-cypress-m8"
            "kmod-usb-serial-ftdi"
            "kmod-usb-serial-garmin"
            "kmod-usb-serial-ipw"
            "kmod-usb-serial-keyspan"
            "kmod-usb-serial-mct"
            "kmod-usb-serial-mos7720"
            "kmod-usb-serial-option"
            "kmod-usb-serial-oti6858"
            "kmod-usb-serial-pl2303"
            "kmod-usb-serial-qualcomm"
            "kmod-usb-serial-sierrawireless"
            "kmod-usb-serial-simple"
            "kmod-usb-serial-ti-usb"
            "kmod-usb-serial-visor"
            "kmod-usb-serial-wwan"
            "kmod-usb-storage"
            "kmod-usb-wdm"
            "kmod-usb-xhci-hcd"
            "kmod-usb2"
            "kmod-usb3"
            "kmod-veth"
            "kmod-via-rhine"
            "kmod-via-velocity"
            "kmod-vmxnet3"
            "kmod-wireguard"
            "kmod-zram"
            "libatomic1"
            "libattr"
            "libbfd"
            "libblkid1"
            "libblobmsg-json20240329"
            "libbpf1"
            "libc"
            "libcap"
            "libcap-ng"
            "libcares"
            "libcomerr0"
            "libcurl4"
            "libdbus"
            "libe2p2"
            "libedit"
            "libelf1"
            "libell"
            "libev"
            "libevdev"
            "libevent2-7"
            "libexpat"
            "libext2fs2"
            "libf2fs6"
            "libffi"
            "libgcc1"
            "libgd"
            "libgmp10"
            "libgnutls"
            "libidn2"
            "libimobiledevice"
            "libimobiledevice-glue"
            "libimobiledevice-utils"
            "libip4tc2"
            "libip6tc2"
            "libiptext-nft0"
            "libiptext0"
            "libiptext6-0"
            "libiwinfo-data"
            "libiwinfo-lua"
            "libiwinfo20230701"
            "libjpeg-turbo"
            "libjson-c5"
            "libjson-script20240329"
            "libkmod"
            "liblua5.1.5"
            "liblucihttp-lua"
            "liblucihttp-ucode"
            "liblucihttp0"
            "liblz4-1"
            "liblzo2"
            "libmbedtls21"
            "libmbim"
            "libmnl0"
            "libmount1"
            "libncurses6"
            "libnet-1.2.x"
            "libnetfilter-conntrack3"
            "libnetfilter-cthelper0"
            "libnetfilter-cttimeout1"
            "libnetfilter-queue1"
            "libnetsnmp"
            "libnettle8"
            "libnfnetlink0"
            "libnftnl11"
            "libnghttp2-14"
            "libnl-core200"
            "libnl-genl200"
            "libnl-tiny1"
            "libopcodes"
            "libopenssl-conf"
            "libopenssl-legacy"
            "libopenssl3"
            "libpcap1"
            "libpci"
            "libpcre2"
            "libplist"
            "libpng"
            "libpthread"
            "libqmi"
            "libqrtr-glib"
            "libreadline8"
            "librt"
            "libsmartcols1"
            "libsodium"
            "libsqlite3-0"
            "libss2"
            "libssh2-1"
            "libstdcpp6"
            "libubox20240329"
            "libubus-lua"
            "libubus20250102"
            "libuci20250120"
            "libuclient20201210"
            "libucode20230711"
            "libudebug"
            "libudev-zero"
            "libunbound"
            "libunistring"
            "liburcu"
            "libusb-1.0-0"
            "libusbmuxd"
            "libustream-openssl20201210"
            "libuuid1"
            "libuv1"
            "libwebp"
            "libwebsockets-full"
            "libxml2"
            "libxtables12"
            "logd"
            "lua"
            "lua-cjson"
            "luci-app-acl"
            "luci-app-ddns"
            "luci-app-dsvpn"
            "luci-app-firewall"
            "luci-app-glorytun-tcp"
            "luci-app-glorytun-udp"
            "luci-app-iperf"
            "luci-app-mail"
            "luci-app-mlvpn"
            "luci-app-mptcp"
            "luci-app-omr-bypass"
            "luci-app-omr-dscp"
            "luci-app-omr-quota"
            "luci-app-omr-tracker"
            "luci-app-openmptcprouter"
            "luci-app-openvpn"
            "luci-app-package-manager"
            "luci-app-shadowsocks-libev"
            "luci-app-shadowsocks-rust"
            "luci-app-shutdown"
            "luci-app-smartdns"
            "luci-app-snmpd"
            "luci-app-sqm-autorate"
            "luci-app-sysupgrade"
            "luci-app-ttyd"
            "luci-app-uhttpd"
            "luci-app-unbound"
            "luci-app-upnp"
            "luci-app-vnstat2"
            "luci-app-wol"
            "luci-base"
            "luci-compat"
            "luci-i18n-acl-ar"
            "luci-i18n-acl-bg"
            "luci-i18n-acl-bn"
            "luci-i18n-acl-ca"
            "luci-i18n-acl-cs"
            "luci-i18n-acl-de"
            "luci-i18n-acl-el"
            "luci-i18n-acl-es"
            "luci-i18n-acl-fi"
            "luci-i18n-acl-fr"
            "luci-i18n-acl-he"
            "luci-i18n-acl-hi"
            "luci-i18n-acl-hu"
            "luci-i18n-acl-it"
            "luci-i18n-acl-ja"
            "luci-i18n-acl-ko"
            "luci-i18n-acl-mr"
            "luci-i18n-acl-ms"
            "luci-i18n-acl-no"
            "luci-i18n-acl-pl"
            "luci-i18n-acl-pt"
            "luci-i18n-acl-pt-br"
            "luci-i18n-acl-ro"
            "luci-i18n-acl-ru"
            "luci-i18n-acl-sk"
            "luci-i18n-acl-sv"
            "luci-i18n-acl-tr"
            "luci-i18n-acl-uk"
            "luci-i18n-acl-vi"
            "luci-i18n-acl-zh-cn"
            "luci-i18n-acl-zh-tw"
            "luci-i18n-base-ar"
            "luci-i18n-base-bg"
            "luci-i18n-base-bn"
            "luci-i18n-base-ca"
            "luci-i18n-base-cs"
            "luci-i18n-base-de"
            "luci-i18n-base-el"
            "luci-i18n-base-es"
            "luci-i18n-base-fi"
            "luci-i18n-base-fr"
            "luci-i18n-base-he"
            "luci-i18n-base-hi"
            "luci-i18n-base-hu"
            "luci-i18n-base-it"
            "luci-i18n-base-ja"
            "luci-i18n-base-ko"
            "luci-i18n-base-mr"
            "luci-i18n-base-ms"
            "luci-i18n-base-no"
            "luci-i18n-base-pl"
            "luci-i18n-base-pt"
            "luci-i18n-base-pt-br"
            "luci-i18n-base-ro"
            "luci-i18n-base-ru"
            "luci-i18n-base-sk"
            "luci-i18n-base-sv"
            "luci-i18n-base-tr"
            "luci-i18n-base-uk"
            "luci-i18n-base-vi"
            "luci-i18n-base-zh-cn"
            "luci-i18n-base-zh-tw"
            "luci-i18n-dashboard-fr"
            "luci-i18n-dashboard-ru"
            "luci-i18n-dashboard-zh-cn"
            "luci-i18n-ddns-ar"
            "luci-i18n-ddns-bg"
            "luci-i18n-ddns-bn"
            "luci-i18n-ddns-ca"
            "luci-i18n-ddns-cs"
            "luci-i18n-ddns-de"
            "luci-i18n-ddns-el"
            "luci-i18n-ddns-es"
            "luci-i18n-ddns-fi"
            "luci-i18n-ddns-fr"
            "luci-i18n-ddns-he"
            "luci-i18n-ddns-hi"
            "luci-i18n-ddns-hu"
            "luci-i18n-ddns-it"
            "luci-i18n-ddns-ja"
            "luci-i18n-ddns-ko"
            "luci-i18n-ddns-mr"
            "luci-i18n-ddns-ms"
            "luci-i18n-ddns-no"
            "luci-i18n-ddns-pl"
            "luci-i18n-ddns-pt"
            "luci-i18n-ddns-pt-br"
            "luci-i18n-ddns-ro"
            "luci-i18n-ddns-ru"
            "luci-i18n-ddns-sk"
            "luci-i18n-ddns-sv"
            "luci-i18n-ddns-tr"
            "luci-i18n-ddns-uk"
            "luci-i18n-ddns-vi"
            "luci-i18n-ddns-zh-cn"
            "luci-i18n-ddns-zh-tw"
            "luci-i18n-dsvpn-fr"
            "luci-i18n-dsvpn-ru"
            "luci-i18n-dsvpn-zh-cn"
            "luci-i18n-firewall-ar"
            "luci-i18n-firewall-bg"
            "luci-i18n-firewall-bn"
            "luci-i18n-firewall-ca"
            "luci-i18n-firewall-cs"
            "luci-i18n-firewall-de"
            "luci-i18n-firewall-el"
            "luci-i18n-firewall-es"
            "luci-i18n-firewall-fi"
            "luci-i18n-firewall-fr"
            "luci-i18n-firewall-he"
            "luci-i18n-firewall-hi"
            "luci-i18n-firewall-hu"
            "luci-i18n-firewall-it"
            "luci-i18n-firewall-ja"
            "luci-i18n-firewall-ko"
            "luci-i18n-firewall-mr"
            "luci-i18n-firewall-ms"
            "luci-i18n-firewall-no"
            "luci-i18n-firewall-pl"
            "luci-i18n-firewall-pt"
            "luci-i18n-firewall-pt-br"
            "luci-i18n-firewall-ro"
            "luci-i18n-firewall-ru"
            "luci-i18n-firewall-sk"
            "luci-i18n-firewall-sv"
            "luci-i18n-firewall-tr"
            "luci-i18n-firewall-uk"
            "luci-i18n-firewall-vi"
            "luci-i18n-firewall-zh-cn"
            "luci-i18n-firewall-zh-tw"
            "luci-i18n-glorytun-tcp-fr"
            "luci-i18n-glorytun-tcp-ru"
            "luci-i18n-glorytun-tcp-zh-cn"
            "luci-i18n-glorytun-udp-fr"
            "luci-i18n-glorytun-udp-ru"
            "luci-i18n-glorytun-udp-zh-cn"
            "luci-i18n-iperf-de"
            "luci-i18n-iperf-fr"
            "luci-i18n-iperf-it"
            "luci-i18n-iperf-ru"
            "luci-i18n-iperf-zh-cn"
            "luci-i18n-mail-de"
            "luci-i18n-mail-fr"
            "luci-i18n-mail-it"
            "luci-i18n-mail-ru"
            "luci-i18n-mail-zh-cn"
            "luci-i18n-mlvpn-fr"
            "luci-i18n-mlvpn-ru"
            "luci-i18n-mlvpn-zh-cn"
            "luci-i18n-mptcp-de"
            "luci-i18n-mptcp-fr"
            "luci-i18n-mptcp-it"
            "luci-i18n-mptcp-ru"
            "luci-i18n-mptcp-zh-cn"
            "luci-i18n-omr-bypass-de"
            "luci-i18n-omr-bypass-fr"
            "luci-i18n-omr-bypass-it"
            "luci-i18n-omr-bypass-ru"
            "luci-i18n-omr-bypass-zh-cn"
            "luci-i18n-omr-dscp-de"
            "luci-i18n-omr-dscp-fr"
            "luci-i18n-omr-dscp-it"
            "luci-i18n-omr-dscp-zh-cn"
            "luci-i18n-omr-quota-de"
            "luci-i18n-omr-quota-fr"
            "luci-i18n-omr-quota-it"
            "luci-i18n-omr-quota-ru"
            "luci-i18n-omr-quota-zh-cn"
            "luci-i18n-omr-tracker-de"
            "luci-i18n-omr-tracker-fr"
            "luci-i18n-omr-tracker-it"
            "luci-i18n-omr-tracker-zh-cn"
            "luci-i18n-openmptcprouter-de"
            "luci-i18n-openmptcprouter-fr"
            "luci-i18n-openmptcprouter-it"
            "luci-i18n-openmptcprouter-zh-cn"
            "luci-i18n-openvpn-ar"
            "luci-i18n-openvpn-bg"
            "luci-i18n-openvpn-bn"
            "luci-i18n-openvpn-ca"
            "luci-i18n-openvpn-cs"
            "luci-i18n-openvpn-de"
            "luci-i18n-openvpn-el"
            "luci-i18n-openvpn-es"
            "luci-i18n-openvpn-fi"
            "luci-i18n-openvpn-fr"
            "luci-i18n-openvpn-he"
            "luci-i18n-openvpn-hi"
            "luci-i18n-openvpn-hu"
            "luci-i18n-openvpn-it"
            "luci-i18n-openvpn-ja"
            "luci-i18n-openvpn-ko"
            "luci-i18n-openvpn-mr"
            "luci-i18n-openvpn-ms"
            "luci-i18n-openvpn-no"
            "luci-i18n-openvpn-pl"
            "luci-i18n-openvpn-pt"
            "luci-i18n-openvpn-pt-br"
            "luci-i18n-openvpn-ro"
            "luci-i18n-openvpn-ru"
            "luci-i18n-openvpn-sk"
            "luci-i18n-openvpn-sv"
            "luci-i18n-openvpn-tr"
            "luci-i18n-openvpn-uk"
            "luci-i18n-openvpn-vi"
            "luci-i18n-openvpn-zh-cn"
            "luci-i18n-openvpn-zh-tw"
            "luci-i18n-package-manager-ar"
            "luci-i18n-package-manager-bg"
            "luci-i18n-package-manager-bn"
            "luci-i18n-package-manager-ca"
            "luci-i18n-package-manager-cs"
            "luci-i18n-package-manager-de"
            "luci-i18n-package-manager-el"
            "luci-i18n-package-manager-es"
            "luci-i18n-package-manager-fi"
            "luci-i18n-package-manager-fr"
            "luci-i18n-package-manager-he"
            "luci-i18n-package-manager-hi"
            "luci-i18n-package-manager-hu"
            "luci-i18n-package-manager-it"
            "luci-i18n-package-manager-ja"
            "luci-i18n-package-manager-ko"
            "luci-i18n-package-manager-mr"
            "luci-i18n-package-manager-ms"
            "luci-i18n-package-manager-no"
            "luci-i18n-package-manager-pl"
            "luci-i18n-package-manager-pt"
            "luci-i18n-package-manager-pt-br"
            "luci-i18n-package-manager-ro"
            "luci-i18n-package-manager-ru"
            "luci-i18n-package-manager-sk"
            "luci-i18n-package-manager-sv"
            "luci-i18n-package-manager-tr"
            "luci-i18n-package-manager-uk"
            "luci-i18n-package-manager-vi"
            "luci-i18n-package-manager-zh-cn"
            "luci-i18n-package-manager-zh-tw"
            "luci-i18n-shadowsocks-libev-bg"
            "luci-i18n-shadowsocks-libev-ca"
            "luci-i18n-shadowsocks-libev-cs"
            "luci-i18n-shadowsocks-libev-de"
            "luci-i18n-shadowsocks-libev-el"
            "luci-i18n-shadowsocks-libev-es"
            "luci-i18n-shadowsocks-libev-fr"
            "luci-i18n-shadowsocks-libev-he"
            "luci-i18n-shadowsocks-libev-hi"
            "luci-i18n-shadowsocks-libev-hu"
            "luci-i18n-shadowsocks-libev-it"
            "luci-i18n-shadowsocks-libev-ja"
            "luci-i18n-shadowsocks-libev-ko"
            "luci-i18n-shadowsocks-libev-ms"
            "luci-i18n-shadowsocks-libev-no"
            "luci-i18n-shadowsocks-libev-pl"
            "luci-i18n-shadowsocks-libev-pt"
            "luci-i18n-shadowsocks-libev-pt-br"
            "luci-i18n-shadowsocks-libev-ro"
            "luci-i18n-shadowsocks-libev-ru"
            "luci-i18n-shadowsocks-libev-sk"
            "luci-i18n-shadowsocks-libev-sv"
            "luci-i18n-shadowsocks-libev-tr"
            "luci-i18n-shadowsocks-libev-uk"
            "luci-i18n-shadowsocks-libev-vi"
            "luci-i18n-shadowsocks-rust-bg"
            "luci-i18n-shadowsocks-rust-ca"
            "luci-i18n-shadowsocks-rust-cs"
            "luci-i18n-shadowsocks-rust-de"
            "luci-i18n-shadowsocks-rust-el"
            "luci-i18n-shadowsocks-rust-es"
            "luci-i18n-shadowsocks-rust-fr"
            "luci-i18n-shadowsocks-rust-he"
            "luci-i18n-shadowsocks-rust-hi"
            "luci-i18n-shadowsocks-rust-hu"
            "luci-i18n-shadowsocks-rust-it"
            "luci-i18n-shadowsocks-rust-ja"
            "luci-i18n-shadowsocks-rust-ko"
            "luci-i18n-shadowsocks-rust-ms"
            "luci-i18n-shadowsocks-rust-no"
            "luci-i18n-shadowsocks-rust-pl"
            "luci-i18n-shadowsocks-rust-pt"
            "luci-i18n-shadowsocks-rust-pt-br"
            "luci-i18n-shadowsocks-rust-ro"
            "luci-i18n-shadowsocks-rust-ru"
            "luci-i18n-shadowsocks-rust-sk"
            "luci-i18n-shadowsocks-rust-sv"
            "luci-i18n-shadowsocks-rust-tr"
            "luci-i18n-shadowsocks-rust-uk"
            "luci-i18n-shadowsocks-rust-vi"
            "luci-i18n-shutdown-de"
            "luci-i18n-shutdown-fr"
            "luci-i18n-shutdown-it"
            "luci-i18n-shutdown-pl"
            "luci-i18n-shutdown-ru"
            "luci-i18n-shutdown-zh-cn"
            "luci-i18n-smartdns-ar"
            "luci-i18n-smartdns-bg"
            "luci-i18n-smartdns-bn"
            "luci-i18n-smartdns-ca"
            "luci-i18n-smartdns-cs"
            "luci-i18n-smartdns-de"
            "luci-i18n-smartdns-el"
            "luci-i18n-smartdns-es"
            "luci-i18n-smartdns-fi"
            "luci-i18n-smartdns-fr"
            "luci-i18n-smartdns-he"
            "luci-i18n-smartdns-hi"
            "luci-i18n-smartdns-hu"
            "luci-i18n-smartdns-it"
            "luci-i18n-smartdns-ja"
            "luci-i18n-smartdns-ko"
            "luci-i18n-smartdns-mr"
            "luci-i18n-smartdns-ms"
            "luci-i18n-smartdns-no"
            "luci-i18n-smartdns-pl"
            "luci-i18n-smartdns-pt"
            "luci-i18n-smartdns-pt-br"
            "luci-i18n-smartdns-ro"
            "luci-i18n-smartdns-ru"
            "luci-i18n-smartdns-sk"
            "luci-i18n-smartdns-sv"
            "luci-i18n-smartdns-tr"
            "luci-i18n-smartdns-uk"
            "luci-i18n-smartdns-vi"
            "luci-i18n-smartdns-zh-cn"
            "luci-i18n-smartdns-zh-tw"
            "luci-i18n-snmpd-ar"
            "luci-i18n-snmpd-bg"
            "luci-i18n-snmpd-bn"
            "luci-i18n-snmpd-ca"
            "luci-i18n-snmpd-cs"
            "luci-i18n-snmpd-de"
            "luci-i18n-snmpd-el"
            "luci-i18n-snmpd-es"
            "luci-i18n-snmpd-fi"
            "luci-i18n-snmpd-fr"
            "luci-i18n-snmpd-he"
            "luci-i18n-snmpd-hi"
            "luci-i18n-snmpd-hu"
            "luci-i18n-snmpd-it"
            "luci-i18n-snmpd-ja"
            "luci-i18n-snmpd-ko"
            "luci-i18n-snmpd-mr"
            "luci-i18n-snmpd-ms"
            "luci-i18n-snmpd-no"
            "luci-i18n-snmpd-pl"
            "luci-i18n-snmpd-pt"
            "luci-i18n-snmpd-pt-br"
            "luci-i18n-snmpd-ro"
            "luci-i18n-snmpd-ru"
            "luci-i18n-snmpd-sk"
            "luci-i18n-snmpd-sv"
            "luci-i18n-snmpd-tr"
            "luci-i18n-snmpd-uk"
            "luci-i18n-snmpd-vi"
            "luci-i18n-snmpd-zh-cn"
            "luci-i18n-snmpd-zh-tw"
            "luci-i18n-sqm-autorate-ar"
            "luci-i18n-sqm-autorate-bg"
            "luci-i18n-sqm-autorate-bn"
            "luci-i18n-sqm-autorate-ca"
            "luci-i18n-sqm-autorate-cs"
            "luci-i18n-sqm-autorate-de"
            "luci-i18n-sqm-autorate-el"
            "luci-i18n-sqm-autorate-es"
            "luci-i18n-sqm-autorate-fi"
            "luci-i18n-sqm-autorate-fr"
            "luci-i18n-sqm-autorate-he"
            "luci-i18n-sqm-autorate-hi"
            "luci-i18n-sqm-autorate-hu"
            "luci-i18n-sqm-autorate-it"
            "luci-i18n-sqm-autorate-ja"
            "luci-i18n-sqm-autorate-ko"
            "luci-i18n-sqm-autorate-mr"
            "luci-i18n-sqm-autorate-ms"
            "luci-i18n-sqm-autorate-no"
            "luci-i18n-sqm-autorate-pl"
            "luci-i18n-sqm-autorate-pt"
            "luci-i18n-sqm-autorate-pt-br"
            "luci-i18n-sqm-autorate-ro"
            "luci-i18n-sqm-autorate-ru"
            "luci-i18n-sqm-autorate-sk"
            "luci-i18n-sqm-autorate-sv"
            "luci-i18n-sqm-autorate-tr"
            "luci-i18n-sqm-autorate-uk"
            "luci-i18n-sqm-autorate-vi"
            "luci-i18n-sqm-autorate-zh-cn"
            "luci-i18n-sqm-autorate-zh-tw"
            "luci-i18n-sysupgrade-fr"
            "luci-i18n-sysupgrade-ru"
            "luci-i18n-sysupgrade-zh-cn"
            "luci-i18n-ttyd-ar"
            "luci-i18n-ttyd-bg"
            "luci-i18n-ttyd-bn"
            "luci-i18n-ttyd-ca"
            "luci-i18n-ttyd-cs"
            "luci-i18n-ttyd-de"
            "luci-i18n-ttyd-el"
            "luci-i18n-ttyd-es"
            "luci-i18n-ttyd-fi"
            "luci-i18n-ttyd-fr"
            "luci-i18n-ttyd-he"
            "luci-i18n-ttyd-hi"
            "luci-i18n-ttyd-hu"
            "luci-i18n-ttyd-it"
            "luci-i18n-ttyd-ja"
            "luci-i18n-ttyd-ko"
            "luci-i18n-ttyd-mr"
            "luci-i18n-ttyd-ms"
            "luci-i18n-ttyd-no"
            "luci-i18n-ttyd-pl"
            "luci-i18n-ttyd-pt"
            "luci-i18n-ttyd-pt-br"
            "luci-i18n-ttyd-ro"
            "luci-i18n-ttyd-ru"
            "luci-i18n-ttyd-sk"
            "luci-i18n-ttyd-sv"
            "luci-i18n-ttyd-tr"
            "luci-i18n-ttyd-uk"
            "luci-i18n-ttyd-vi"
            "luci-i18n-ttyd-zh-cn"
            "luci-i18n-ttyd-zh-tw"
            "luci-i18n-uhttpd-ar"
            "luci-i18n-uhttpd-bg"
            "luci-i18n-uhttpd-bn"
            "luci-i18n-uhttpd-ca"
            "luci-i18n-uhttpd-cs"
            "luci-i18n-uhttpd-de"
            "luci-i18n-uhttpd-el"
            "luci-i18n-uhttpd-es"
            "luci-i18n-uhttpd-fi"
            "luci-i18n-uhttpd-fr"
            "luci-i18n-uhttpd-he"
            "luci-i18n-uhttpd-hi"
            "luci-i18n-uhttpd-hu"
            "luci-i18n-uhttpd-it"
            "luci-i18n-uhttpd-ja"
            "luci-i18n-uhttpd-ko"
            "luci-i18n-uhttpd-mr"
            "luci-i18n-uhttpd-ms"
            "luci-i18n-uhttpd-no"
            "luci-i18n-uhttpd-pl"
            "luci-i18n-uhttpd-pt"
            "luci-i18n-uhttpd-pt-br"
            "luci-i18n-uhttpd-ro"
            "luci-i18n-uhttpd-ru"
            "luci-i18n-uhttpd-sk"
            "luci-i18n-uhttpd-sv"
            "luci-i18n-uhttpd-tr"
            "luci-i18n-uhttpd-uk"
            "luci-i18n-uhttpd-vi"
            "luci-i18n-uhttpd-zh-cn"
            "luci-i18n-uhttpd-zh-tw"
            "luci-i18n-unbound-ar"
            "luci-i18n-unbound-bg"
            "luci-i18n-unbound-bn"
            "luci-i18n-unbound-ca"
            "luci-i18n-unbound-cs"
            "luci-i18n-unbound-de"
            "luci-i18n-unbound-el"
            "luci-i18n-unbound-es"
            "luci-i18n-unbound-fi"
            "luci-i18n-unbound-fr"
            "luci-i18n-unbound-he"
            "luci-i18n-unbound-hi"
            "luci-i18n-unbound-hu"
            "luci-i18n-unbound-it"
            "luci-i18n-unbound-ja"
            "luci-i18n-unbound-ko"
            "luci-i18n-unbound-mr"
            "luci-i18n-unbound-ms"
            "luci-i18n-unbound-no"
            "luci-i18n-unbound-pl"
            "luci-i18n-unbound-pt"
            "luci-i18n-unbound-pt-br"
            "luci-i18n-unbound-ro"
            "luci-i18n-unbound-ru"
            "luci-i18n-unbound-sk"
            "luci-i18n-unbound-sv"
            "luci-i18n-unbound-tr"
            "luci-i18n-unbound-uk"
            "luci-i18n-unbound-vi"
            "luci-i18n-unbound-zh-cn"
            "luci-i18n-unbound-zh-tw"
            "luci-i18n-upnp-ar"
            "luci-i18n-upnp-bg"
            "luci-i18n-upnp-bn"
            "luci-i18n-upnp-ca"
            "luci-i18n-upnp-cs"
            "luci-i18n-upnp-de"
            "luci-i18n-upnp-el"
            "luci-i18n-upnp-es"
            "luci-i18n-upnp-fi"
            "luci-i18n-upnp-fr"
            "luci-i18n-upnp-he"
            "luci-i18n-upnp-hi"
            "luci-i18n-upnp-hu"
            "luci-i18n-upnp-it"
            "luci-i18n-upnp-ja"
            "luci-i18n-upnp-ko"
            "luci-i18n-upnp-mr"
            "luci-i18n-upnp-ms"
            "luci-i18n-upnp-no"
            "luci-i18n-upnp-pl"
            "luci-i18n-upnp-pt"
            "luci-i18n-upnp-pt-br"
            "luci-i18n-upnp-ro"
            "luci-i18n-upnp-ru"
            "luci-i18n-upnp-sk"
            "luci-i18n-upnp-sv"
            "luci-i18n-upnp-tr"
            "luci-i18n-upnp-uk"
            "luci-i18n-upnp-vi"
            "luci-i18n-upnp-zh-cn"
            "luci-i18n-upnp-zh-tw"
            "luci-i18n-vnstat2-ar"
            "luci-i18n-vnstat2-bg"
            "luci-i18n-vnstat2-bn"
            "luci-i18n-vnstat2-ca"
            "luci-i18n-vnstat2-cs"
            "luci-i18n-vnstat2-de"
            "luci-i18n-vnstat2-el"
            "luci-i18n-vnstat2-es"
            "luci-i18n-vnstat2-fi"
            "luci-i18n-vnstat2-fr"
            "luci-i18n-vnstat2-he"
            "luci-i18n-vnstat2-hi"
            "luci-i18n-vnstat2-hu"
            "luci-i18n-vnstat2-it"
            "luci-i18n-vnstat2-ja"
            "luci-i18n-vnstat2-ko"
            "luci-i18n-vnstat2-mr"
            "luci-i18n-vnstat2-ms"
            "luci-i18n-vnstat2-no"
            "luci-i18n-vnstat2-pl"
            "luci-i18n-vnstat2-pt"
            "luci-i18n-vnstat2-pt-br"
            "luci-i18n-vnstat2-ro"
            "luci-i18n-vnstat2-ru"
            "luci-i18n-vnstat2-sk"
            "luci-i18n-vnstat2-sv"
            "luci-i18n-vnstat2-tr"
            "luci-i18n-vnstat2-uk"
            "luci-i18n-vnstat2-vi"
            "luci-i18n-vnstat2-zh-cn"
            "luci-i18n-vnstat2-zh-tw"
            "luci-i18n-wol-ar"
            "luci-i18n-wol-bg"
            "luci-i18n-wol-bn"
            "luci-i18n-wol-ca"
            "luci-i18n-wol-cs"
            "luci-i18n-wol-de"
            "luci-i18n-wol-el"
            "luci-i18n-wol-es"
            "luci-i18n-wol-fi"
            "luci-i18n-wol-fr"
            "luci-i18n-wol-he"
            "luci-i18n-wol-hi"
            "luci-i18n-wol-hu"
            "luci-i18n-wol-it"
            "luci-i18n-wol-ja"
            "luci-i18n-wol-ko"
            "luci-i18n-wol-mr"
            "luci-i18n-wol-ms"
            "luci-i18n-wol-no"
            "luci-i18n-wol-pl"
            "luci-i18n-wol-pt"
            "luci-i18n-wol-pt-br"
            "luci-i18n-wol-ro"
            "luci-i18n-wol-ru"
            "luci-i18n-wol-sk"
            "luci-i18n-wol-sv"
            "luci-i18n-wol-tr"
            "luci-i18n-wol-uk"
            "luci-i18n-wol-vi"
            "luci-i18n-wol-zh-cn"
            "luci-i18n-wol-zh-tw"
            "luci-lib-base"
            "luci-lib-ip"
            "luci-lib-json"
            "luci-lib-jsonc"
            "luci-lib-nixio"
            "luci-lib-uqr"
            "luci-lua-runtime"
            "luci-mod-admin-full"
            "luci-mod-dashboard"
            "luci-mod-network"
            "luci-mod-status"
            "luci-mod-system"
            "luci-proto-3g"
            "luci-proto-external"
            "luci-proto-gre"
            "luci-proto-ipv6"
            "luci-proto-mbim"
            "luci-proto-modemmanager"
            "luci-proto-ncm"
            "luci-proto-ppp"
            "luci-proto-qmi"
            "luci-proto-wireguard"
            "luci-theme-alpha"
            "luci-theme-argon"
            "luci-theme-bootstrap"
            "luci-theme-design"
            "luci-theme-material"
            "luci-theme-openmptcprouter"
            "luci-theme-openwrt-2020"
            "mbim-utils"
            "mc"
            "miniupnpd-nftables"
            "mkf2fs"
            "mlvpn"
            "mmc-utils"
            "modemmanager"
            "mptcp"
            "mptcp-bpf-bkup"
            "mptcp-bpf-burst"
            "mptcp-bpf-first"
            "mptcp-bpf-minrtt"
            "mptcp-bpf-red"
            "mptcp-bpf-rr"
            "mptcpd"
            "msmtp"
            "msmtp-mta"
            "mtd"
            "nano"
            "netcat"
            "netifd"
            "nftables-json"
            "nstat"
            "odhcp6c"
            "odhcpd-ipv6only"
            "omr-6in4"
            "omr-bypass-nft"
            "omr-dscp-nft"
            "omr-quota"
            "omr-schedule"
            "omr-tracker"
            "omr-update"
            "openmptcprouter"
            "openmptcprouter-api"
            "openssl-util"
            "openvpn-openssl"
            "openwrt-keyring"
            "opkg"
            "partx-utils"
            "pciids"
            "pciutils"
            "ppp"
            "ppp-mod-pppoe"
            "procd"
            "procd-seccomp"
            "procd-ujail"
            "r8152-firmware"
            "r8169-firmware"
            "resolveip"
            "rng-tools"
            "rpcd"
            "rpcd-mod-file"
            "rpcd-mod-iwinfo"
            "rpcd-mod-luci"
            "rpcd-mod-rpcsys"
            "rpcd-mod-ucode"
            "rt2800-usb-firmware"
            "rtl8192cu-firmware"
            "rtl8192eu-firmware"
            "shadowsocks-libev-config"
            "shadowsocks-libev-ss-local"
            "shadowsocks-libev-ss-redir"
            "shadowsocks-libev-ss-rules-nft"
            "shadowsocks-libev-ss-server"
            "shadowsocks-libev-ss-tunnel"
            "shadowsocks-rust-config-nft"
            "shadowsocks-rust-sslocal"
            "shadowsocks-rust-ssservice"
            "simple-obfs"
            "smartdns"
            "snmpd"
            "speedtestcpp"
            "sqlite3-cli"
            "sqm-autorate"
            "sqm-scripts"
            "ss"
            "swconfig"
            "tc-tiny"
            "tcpdump"
            "tcptraceroute"
            "terminfo"
            "tracebox"
            "tsping"
            "ttyd"
            "ubox"
            "ubus"
            "ubusd"
            "uci"
            "uclient-fetch"
            "ucode"
            "ucode-mod-fs"
            "ucode-mod-html"
            "ucode-mod-lua"
            "ucode-mod-math"
            "ucode-mod-nl80211"
            "ucode-mod-rtnl"
            "ucode-mod-ubus"
            "ucode-mod-uci"
            "ucode-mod-uloop"
            "uhttpd"
            "uhttpd-mod-ubus"
            "umbim"
            "unbound-anchor"
            "unbound-control"
            "unbound-daemon"
            "uqmi"
            "urandom-seed"
            "urngd"
            "usb-modeswitch"
            "usbids"
            "usbmuxd"
            "usbutils"
            "usign"
            "v2ray-config-nft"
            "v2ray-core"
            "vnstat2"
            "vnstati2"
            "whois"
            "wifi-scripts"
            "wireguard-tools"
            "wireless-regdb"
            "wireless-tools"
            "wpad-mesh-openssl"
            "wwan"
            "xray-config-nft"
            "xray-core"
            "xtables-nft"
            "zlib"
          ];
        };
        sub-router = {
          packages = [
            "kmod-usb-net-rtl8152"
            "luci"
            "luci-i18n-base-ja"
          ];
        };
      };
    in
    {
      packages.x86_64-linux = mapAttrs (
        name: cfg: openwrt-imagebuilder.lib.build (commonConfig // cfg)
      ) routerConfigs;
    };
}
